@using Article.Core.Entities
@model Article.ViewModels.ProductsManagerViewModel
@{
    ViewBag.Title = "فروشگاه";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Two columns content -->
<div class="main-container col2-right-layout">
    <div class="main container">
        <div class="row">
            <section class="col-main col-sm-9 col-sm-push-3 wow bounceInUp animated">
                <div class="category-description std">
                    <div class="slider-items-products">
                        <div id="category-desc-slider" class="product-flexslider hidden-buttons">
                            <div class="slider-items slider-width-col1">

                                <!-- Item -->
                                <div class="item">
                                    <a href="#"><img alt="" src="~/assets/images/article-1.jpg" width="900" height="444"></a>
                                    <div class="cat-img-title cat-bg cat-box">
                                        <h2 class="cat-heading">نمایش مقالات علمی</h2>
                                        <p>در اینجا لیستی از نمایش مقالات علمی را مشاهده میکنید.</p>
                                    </div>
                                </div>
                                <!-- End Item -->
                                <!-- Item -->
                                <div class="item">
                                    <a href="#"><img alt="" src="~/assets/images/article-3.jpg" width="900" height="444"></a>
                                </div>
                                <!-- End Item -->

                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-title">
                    <h1 class="pull-right">محصولات</h1>
                </div>
                <div class="category-products">
                    <div class="toolbar">
                        <div class="pager pull-left">

                            <div class="pages">
                                <label>صفحه:</label>
                                <ul class="pagination">
                                    @*<li><a href="#">&laquo;</a></li>*@
                                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Shop"? "active":"")"><a href="@Url.Action("Shop","Home",new{pageNumber = 1})">1</a></li>
                                    @for (int i = 2; i <= ViewBag.CountTotalPages; i++)
                                    {
                                        <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "/Shop?pageNumber="+i ? "active":"")"><a href="@Url.Action("Shop","Home",new{pageNumber = i})">@i</a></li>
                                    }

                                    @*<li><a href="#">&raquo;</a></li>*@
                                </ul>
                            </div>
                        </div>
                    </div>
                    <ul class="products-grid">
                        @foreach (var item in Model.BestSeller)
                        {
                            <li class="item col-lg-4 col-md-4 col-sm-6 col-xs-6">
                                <div class="col-item">
                                    @if (item.Discount != null)
                                    {
                                        <div class="sale-label sale-top-right">حراج</div>
                                    }
                                    <div class="product-image-area">
                                        <a class="product-image" title="@item.NamePersian" href="@Url.Action("Single","Products",new{Id = item.Id})"> <img src="@Url.Content(item.ImageUrl)" class="img-responsive" alt="@item.NamePersian" /> </a>
                                        <div class="hover_fly">
                                            <a class="quick-view" href="@Url.Action("Single","Products",new{Id = item.Id})">
                                                <div>
                                                    <i class="icon-eye-open"></i><span>مشاهده مقاله</span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="info">
                                        <div class="info-inner">
                                            <div class="item-title">
                                                <a title="@item.NamePersian" href="@Url.Action("Single","Products",new{Id = item.Id})"> @item.NamePersian </a>
                                            </div>
                                            <!--item-title-->
                                            <div class="item-content">
                                                <div class="price-box">
                                                    @if (item.Discount != null)
                                                    {
                                                        <p class="special-price">
                                                            <span class="price"> @item.Discount تومان </span>
                                                        </p>
                                                        <p class="old-price">
                                                            <span class="price-sep">-</span> <span class="price"> @item.Price تومان </span>
                                                        </p>
                                                    }
                                                    else
                                                    {
                                                        <p class="special-price">
                                                            <span class="price"> @item.Price تومان </span>
                                                        </p>
                                                    }
                                                </div>
                                            </div>
                                            <!--item-content-->
                                        </div>
                                        <!--info-inner-->

                                        <div class="clearfix"> </div>
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>
                </div>
            </section>
            <aside class="col-right sidebar col-sm-3 col-xs-12 col-sm-pull-9 wow bounceInUp animated">
                <div class="side-nav-categories">
                    <div class="block-title"> دسته بندی ها </div>
                    <!--block-title-->
                    <!-- BEGIN BOX-CATEGORY -->
                    <div class="box-content box-category">
                        <ul>
                            @BuildMenu(Model.Categories)

                            @helper BuildMenu(IEnumerable<Category> data, int? parentId = null)
                                {
                                    var items = data.Where(cat => cat.ParentId == parentId).OrderBy(cat => cat.Name);
                                    if (items.Any())
                                    {


                                        foreach (var item in items)
                                        {
                                            var subs = data.Where(cat => cat.ParentId == item.Id).OrderBy(cat => cat.Name);

                                            if (item.ParentId == null)
                                            {
                                                <li>
                                                    @*<a href="@Url.Action("Shop", "Home", new {categoryName = item.Name})" >@item.Name</a>*@
                                                    <a>@item.Name</a>
                                                    <span class="subDropdown plus"></span>

                                                    @*}
                                                        else
                                                        {*@
                                                    <ul class="level1">
                                                        @foreach (var sub in subs)
                                                        {
                                                            if (sub.ParentId == item.Id)
                                                            {
                                                                <li> <a href="@Url.Action("Shop", "Home", new {categoryName = sub.Name})"> @sub.Name </a> </li>

                                                            }

                                                        }

                                                    </ul>

                                                </li>
                                            }
                                            @BuildMenu(data, item.Id);
                                        }
                                    }
                    }


                        </ul>
                    </div>
                    <!--box-content box-category-->
                </div>
                @*<div class="block block-layered-nav">
                    <div class="block-title">خرید بر اساس</div>
                    <div class="block-content">
                        <p class="block-subtitle">گزینه های خرید</p>
                        <dl id="narrow-by-list">
                            <dt class="odd">قیمت</dt>
                            <dd class="odd">
                                <ol>
                                    <li> <a href="#"><span class="price">$0.00</span> - <span class="price">$99.99</span></a> (6) </li>
                                    <li> <a href="#"><span class="price">$100.00</span> and above</a> (6) </li>
                                </ol>
                            </dd>
                            <dt class="even">Manufacturer</dt>
                                <dd class="even">
                                    <ol>
                                        <li> <a href="#">TheBrand</a> (9) </li>
                                        <li> <a href="#">Company</a> (4) </li>
                                        <li> <a href="#">LogoFashion</a> (1) </li>
                                    </ol>
                                </dd>
                            <dt class="odd">Color</dt>
                                <dd class="odd">
                                    <ol>
                                        <li> <a href="#">Green</a> (1) </li>
                                        <li> <a href="#">White</a> (5) </li>
                                        <li> <a href="#">Black</a> (5) </li>
                                        <li> <a href="#">Gray</a> (4) </li>
                                        <li> <a href="#">Dark Gray</a> (3) </li>
                                        <li> <a href="#">Blue</a> (1) </li>
                                    </ol>
                                </dd>
                                <dt class="last even">Size</dt>
                                <dd class="last even">
                                    <ol>
                                        <li> <a href="#">S</a> (6) </li>
                                        <li> <a href="#">M</a> (6) </li>
                                        <li> <a href="#">L</a> (4) </li>
                                        <li> <a href="#">XL</a> (4) </li>
                                    </ol>
                                </dd>
                        </dl>
                    </div>
                </div>*@
                @*<div class="block block-banner">
                        <a href="#"><img src="images/rhs-banner.jpg" alt="block-banner"></a>
                    </div>*@

            </aside>
        </div>
    </div>
</div>
<!-- End Two columns content -->
